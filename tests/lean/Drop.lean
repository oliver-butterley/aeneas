-- THIS FILE WAS AUTOMATICALLY GENERATED BY AENEAS
-- [drop]
import Aeneas
open Aeneas Aeneas.Std Result ControlFlow Error
set_option linter.dupNamespace false
set_option linter.hashCommand false
set_option linter.unusedVariables false

/- You can set the `maxHeartbeats` value with the `-max-heartbeats` CLI option -/
set_option maxHeartbeats 1000000

namespace drop

/-- [drop::fill]: loop 0:
   Source: 'tests/src/drop.rs', lines 7:4-9:5 -/
def fill_loop
  {T : Type} (corecloneCloneInst : core.clone.Clone T) (s : Slice T)
  (value : T) (iter : core.ops.range.Range Std.Usize) :
  Result (Slice T)
  := do
  loop
    (fun (s1, iter1) =>
      do
      let (o, iter2) ←
        core.iter.range.IteratorRange.next core.iter.range.StepUsize iter1
      match o with
      | none => ok (done s1)
      | some i =>
        let t ← corecloneCloneInst.clone value
        let (t1, index_mut_back) ← Slice.index_mut_usize s1 i
        let s2 := index_mut_back t1
        let s3 ← Slice.update s2 i t
        ok (cont (s3, iter2)))
    (s, iter)

/-- [drop::fill]:
   Source: 'tests/src/drop.rs', lines 3:0-10:1 -/
def fill
  {T : Type} (corecloneCloneInst : core.clone.Clone T) (s : Slice T)
  (value : T) :
  Result (Slice T)
  := do
  let i := Slice.len s
  fill_loop corecloneCloneInst s value { start := 0#usize, «end» := i }

end drop
